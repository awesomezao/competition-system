(this["webpackJsonpcompetition-system"]=this["webpackJsonpcompetition-system"]||[]).push([[8],{415:function(e,a,t){e.exports={container:"Avatar_container__1D5vq",label:"Avatar_label__159kO",img:"Avatar_img__1KkZm",input:"Avatar_input__1cfKC",msg:"Avatar_msg__2ERkg"}},416:function(e,a,t){e.exports={container:"Info_container__13shp",pwd:"Info_pwd__MnLfX",fix:"Info_fix__16ybr",btn:"Info_btn__-ylaV"}},435:function(e,a,t){"use strict";t.r(a);t(101);var n=t(52),i=(t(185),t(158)),c=t(18),r=t.n(c),s=t(41),o=(t(132),t(54)),u=t(4),l=t(0),m=t.n(l),b=t(39),d=t(319),f=t(53),g=t(415),p=t.n(g);var v=function(e){var a=e.msg,t=e.bind,n=e.className,i=e.initialData,c=void 0===i?"":i,r=Object(l.useState)(c),s=Object(u.a)(r,2),o=s[0],b=s[1];return Object(f.e)((function(){if("string"===typeof c)b(c);else{var e=new FileReader;e.readAsDataURL(c),e.onload=function(e){var a;b(null===(a=e.target)||void 0===a?void 0:a.result)}}}),[c]),m.a.createElement("div",{className:"".concat(p.a.container," ").concat(n)},m.a.createElement("label",{className:p.a.label},m.a.createElement("img",{src:o,alt:"",className:p.a.img}),m.a.createElement("input",{onChange:function(e){var a=e.target.files;if(a&&a[0]){var n=new FileReader;n.readAsDataURL(a[0]),n.onload=function(e){var n;b(null===(n=e.target)||void 0===n?void 0:n.result),t(a[0])}}},type:"file",className:p.a.input}),m.a.createElement("span",{className:p.a.msg},a)))},O=t(318),w=t(345),j=t(133),h=t(60),y=t(130),_=t(323),k=t(416),E=t.n(k),R=t(315),x=t(320);a.default=function(e){var a=Object(f.c)(_.b),t=Object(u.a)(a,3),c=t[0],g=t[1],p=t[2],k=Object(l.useState)(!1),N=Object(u.a)(k,2),S=N[0],I=(N[1],Object(l.useState)("")),D=Object(u.a)(I,2),A=D[0],L=D[1],P=Object(l.useState)("\u7537"),V=Object(u.a)(P,2),C=V[0],q=V[1],M=Object(l.useState)(!1),F=Object(u.a)(M,2),B=F[0],J=F[1],K=Object(l.useState)("\u83b7\u53d6\u9a8c\u8bc1\u7801"),U=Object(u.a)(K,2),T=U[0],X=U[1],Z=Object(f.b)(""),z=Object(f.b)(""),G=Object(f.b)(""),H=Object(f.b)(""),Q=Object(f.b)(""),W=Object(f.b)(""),Y=Object(l.useState)(!1),$=Object(u.a)(Y,2),ee=$[0],ae=$[1],te=Object(f.a)(),ne=Object(b.g)(),ie=h.a.useContainer(),ce=Object(R.a)({key:{msg:"\u624b\u673a\u53f7\u5c3d\u91cf\u4e0e\u5fae\u4fe1\u53f7\u4fdd\u6301\u4e00\u81f4",warn:!1,isRight:!1},pwd:{msg:"\u5bc6\u7801\u4e0d\u5c11\u4e8e8\u4f4d",warn:!1,isRight:!1},verification:{msg:"",warn:!1,isRight:!1}}),re=Object(u.a)(ce,2),se=re[0],oe=re[1],ue=Object(y.c)(j.b,{onSuccess:function(e,a){e.data&&(L("http://www.ljhhhx.com:8080/meeting-v2/userIcon/".concat(e.data.info.avatar)),q(e.data.info.gender),Z.setValue(e.data.info.username),z.setValue(e.data.info.emailaddr),G.setValue(e.data.info.phone))}}),le=Object(y.c)((function(e){return Object(j.g)(e)}),{manual:!0}),me=Object(y.c)((function(e){return Object(j.h)(e)}),{manual:!0}),be=Object(y.c)((function(e,a,t){return Object(j.f)(e,a,t)}),{manual:!0,onSuccess:function(e,a){e.code>=0&&(o.a.success("\u4fee\u6539\u6210\u529f,\u8bf7\u91cd\u65b0\u767b\u5f55"),te.clearToken(),J(!1),ie.setIsLogin(!1),ne.push("/login"))}}),de=Object(y.c)((function(e){return Object(j.c)(e)}),{manual:!0}),fe={validatePhoneOrMail:function(){return x.a.required(Q.value)?x.a.isPhoneNumber(Q.value)||x.a.isEmail(Q.value)?(oe((function(e){e.key.msg="\u624b\u673a\u53f7\u5c3d\u91cf\u4e0e\u5fae\u4fe1\u53f7\u4fdd\u6301\u4e00\u81f4",e.key.warn=!1,e.key.isRight=!0})),!0):(oe((function(e){e.key.msg="\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7535\u8bdd\u53f7\u7801\u6216\u90ae\u7bb1",e.key.warn=!0,e.key.isRight=!1})),!1):(oe((function(e){e.key.msg="\u90ae\u7bb1\u6216\u8005\u7535\u8bdd\u4e0d\u80fd\u4e3a\u7a7a",e.key.warn=!0,e.key.isRight=!1})),!1)},validateVerification:function(){return x.a.required(W.value)?(oe((function(e){e.verification.msg="",e.verification.warn=!1,e.verification.isRight=!0})),!0):(oe((function(e){e.verification.msg="\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a",e.verification.warn=!0,e.verification.isRight=!1})),!1)},validatePwd:function(){return x.a.required(H.value)?x.a.checkLength(H.value,8)?(oe((function(e){e.pwd.msg="\u5bc6\u7801\u4e0d\u5c11\u4e8e8\u4f4d",e.pwd.warn=!0,e.pwd.isRight=!1})),!1):(oe((function(e){e.pwd.msg="\u5bc6\u7801\u4e0d\u5c11\u4e8e8\u4f4d",e.pwd.warn=!1,e.pwd.isRight=!0})),!0):(oe((function(e){e.pwd.msg="\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",e.pwd.warn=!0,e.pwd.isRight=!1})),!1)}},ge=Object(y.b)(fe.validatePhoneOrMail,300),pe=Object(y.b)(fe.validatePwd,300),ve=Object(y.b)(fe.validateVerification,300),Oe=Object(y.b)((function(){se.key.isRight&&se.pwd.isRight&&se.verification.isRight?ae(!0):ae(!1)}),300),we=function(){var e=Object(s.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),(t=new FormData).set("img",A),t.set("phone",G.value),le.run({gender:C,username:Z.value,emailaddr:z.value,phone:G.value}),"string"!==typeof t.get("img")&&me.run(t),ue.run();case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(f.e)((function(){X(!0===p?"\u91cd\u65b0\u53d1\u9001\u9a8c\u8bc1\u7801(".concat(c,")"):"\u83b7\u53d6\u9a8c\u8bc1\u7801")}),[c]),m.a.createElement(n.a,{spinning:S},m.a.createElement("form",{className:E.a.container,onSubmit:we},m.a.createElement(v,{msg:"\u4fee\u6539\u5934\u50cf",bind:L,initialData:A}),m.a.createElement(O.a,{type:"text",bind:Z,name:"\u7528\u6237\u540d",msg:"\u6700\u957f\u8d85\u8fc77\u4e2a\u5b57\u7b26",readOnly:!0,update:!0}),m.a.createElement(w.a,{name:"\u6027\u522b",radioList:["\u7537","\u5973"],bind:q,initialData:C}),m.a.createElement(O.a,{type:"text",bind:z,name:"\u90ae\u7bb1",msg:"\u4fee\u6539\u9700\u8981\u6e90\u90ae\u7bb1\u8ba4\u8bc1",readOnly:!0,update:!0}),m.a.createElement(O.a,{type:"text",bind:G,name:"\u7535\u8bdd",msg:"\u4fee\u6539\u9700\u8981\u6e90\u624b\u673a\u8ba4\u8bc1",readOnly:!0,update:!0}),m.a.createElement("div",{className:E.a.pwd},m.a.createElement("h2",{onClick:function(){return J(!0)}},"\u4fee\u6539\u5bc6\u7801"),m.a.createElement("span",null,"\u4fee\u6539\u5bc6\u7801\u9700\u8981\u624b\u673a\u6216\u8005\u90ae\u7bb1\u9a8c\u8bc1")),m.a.createElement(i.a,{title:"\u4fee\u6539\u5bc6\u7801",visible:B,onOk:function(){be.run(Q.value,H.value,W.value)},onCancel:function(){J(!1)},confirmLoading:be.loading,okButtonProps:{disabled:!ee}},m.a.createElement("form",{className:E.a.fix,onInput:Oe.run},m.a.createElement(O.a,{type:"text",onInput:ge.run,bind:Q,name:"\u624b\u673a/\u90ae\u7bb1",msg:se.key.msg,warn:se.key.warn}),m.a.createElement(O.a,{type:"password",onInput:pe.run,bind:H,name:"\u65b0\u5bc6\u7801",msg:se.pwd.msg,warn:se.pwd.warn}),m.a.createElement(O.a,{type:"text",onInput:ve.run,bind:W,name:"\u9a8c\u8bc1\u7801",hasBtn:!0,btnValue:T,btnStatus:p,btnCallback:function(e){e.preventDefault(),g(),fe.validatePhoneOrMail()&&(g(),de.run(Q.value))},msg:se.verification.msg,warn:se.verification.warn}))),m.a.createElement(d.a,{type:"submit",className:E.a.btn,value:"\u4fdd\u5b58",loading:le.loading})))}}}]);