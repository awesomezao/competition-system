(this["webpackJsonpcompetition-system"]=this["webpackJsonpcompetition-system"]||[]).push([[9],{400:function(e,t,a){e.exports={container:"UploadInput_container__D7hHF",upload:"UploadInput_upload__2MRNT",name:"UploadInput_name__2yoFe",input:"UploadInput_input__yyIsu",fileList:"UploadInput_fileList__KFw3c",color:"UploadInput_color__32fEY",tt:"UploadInput_tt__1ne66",actionBar:"UploadInput_actionBar__2I5dC"}},401:function(e,t,a){e.exports={container:"Info_container__1wQkt",header:"Info_header__1O4Y5",title:"Info_title__3Uuzz",btn:"Info_btn__yfECQ",star:"Info_star__2J9u1",starFiled:"Info_starFiled__1ikrW"}},434:function(e,t,a){"use strict";a.r(t);a(101);var n=a(52),i=a(18),c=a.n(i),r=a(41),o=(a(132),a(54)),l=a(4),u=a(0),s=a.n(u),d=a(39),m=a(315),p=a(319),f=a(318),v=a(333),b={name:"download",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]}},g=a(77),h=function(e,t){return s.a.createElement(g.a,Object.assign({},e,{ref:t,icon:b}))};h.displayName="DownloadOutlined";var _=s.a.forwardRef(h),O={name:"close",theme:"outlined",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]}},y=function(e,t){return s.a.createElement(g.a,Object.assign({},e,{ref:t,icon:O}))};y.displayName="CloseOutlined";var E=s.a.forwardRef(y),j=a(400),I=a.n(j);var F=function(e){var t,a=e.name,n=e.meetingId,i=e.needUpload,o=void 0===i||i,l=(e.loadStatus,e.isLoadSucess),u=void 0===l||l,d=e.defaultFileList,m=void 0===d?[]:d,p=e.uploadFile,f=void 0===p?function(){}:p,v=e.deleteFile,b=void 0===v?function(){}:v,g=e.downloadFile,h=void 0===g?function(){}:g,O=e.refresh,y=void 0===O?function(){}:O;!function(e){e.success="#1890ff",e.error="#ff4d4f",e.normal="#000000"}(t||(t={}));var j=function(){var e=Object(r.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o){e.next=8;break}return(a=new FormData).append("file",t.target.files[0]),a.append("meetingId",String(n)),e.next=7,f(a);case 7:u&&y();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:I.a.container},o?s.a.createElement("label",{className:I.a.uploadContainer,onChange:j},s.a.createElement("input",{type:"file"}),s.a.createElement("div",{className:I.a.upload},s.a.createElement("span",{className:I.a.name},a),s.a.createElement("div",{className:I.a.input},"+\u6dfb\u52a0\u9644\u4ef6"))):s.a.createElement(s.a.Fragment,null),s.a.createElement("ul",{className:I.a.fileList},m.map((function(e){return s.a.createElement("li",{key:e.uid},s.a.createElement("span",{className:I.a.tt,style:{color:t.success}},e.name),o?s.a.createElement("div",{className:I.a.actionBar},s.a.createElement(_,{title:"\u4e0b\u8f7d\u6587\u4ef6",onClick:function(){return h(e.meetingId,e.name)}}),s.a.createElement(E,{title:"\u5220\u9664\u6587\u4ef6",onClick:function(){return b(e.uid,e.meetingId)}})):s.a.createElement("div",{className:I.a.actionBar},s.a.createElement(_,{title:"\u4e0b\u8f7d\u6587\u4ef6",onClick:function(){return h(e.meetingId,e.name)}})))}))))},N=a(317),w=a(19),S=a(20),k={name:"star",theme:"filled",icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]}},x=function(e,t){return s.a.createElement(g.a,Object.assign({},e,{ref:t,icon:k}))};x.displayName="StarFilled";var A=s.a.forwardRef(x),z=a(439),L=a(130),T=a(342),U=a(323),C=a(401),B=a.n(C);t.default=function(e){e.type;var t,a,i=Object(d.i)().meetingId,b=Number(i),g=Object(u.useState)(0),h=Object(l.a)(g,2),_=h[0],O=h[1],y=Object(u.useState)(!1),E=Object(l.a)(y,2),j=(E[0],E[1]),I=Object(m.a)({mName:"",startTime:"",introduction:"",organizer:"",communicate:"",schedule:"",isFavorited:!1,isApplied:!1,files:[]}),k=Object(l.a)(I,2),x=k[0],C=k[1];!function(e){e[e.created=1]="created",e[e.applied=2]="applied",e[e.favorited=3]="favorited"}(t||(t={})),function(e){e.applied="rgba(255,190,14,1)",e.unApplied="rgba(255,190,14,1)",e.appliedValue="\u53d6\u6d88\u62a5\u540d",e.unAppliedValue="\u6211\u8981\u62a5\u540d"}(a||(a={}));var V=Object(L.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return Object(N.e)(e)}),{onSuccess:function(e,a){if(e.data){var n=e.data,i=n.relations,c=n.meeting,r=n.files;i.includes(t.created)?O(t.created):O(0),C((function(e){e.isFavorited=i.includes(t.favorited),e.isApplied=i.includes(t.applied),e.mName=c.mName,e.location=c.location,e.startTime=c.startTime,e.introduction=c.introduction,e.organizer=c.organizer,e.communicate=c.communicate,e.schedule=c.schedule,e.typeid=c.typeid,e.needvolunteer=c.needvolunteer,e.files=r.map((function(e){return{uid:e.fileid,name:e.name,meetingId:e.meetingid}}))}))}}}),D=Object(L.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return Object(N.a)(e)}),{manual:!0,onSuccess:function(e,t){e&&e.code>=0?C((function(e){e.isApplied=!0})):C((function(e){e.isApplied=!1}))}}),M=Object(L.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return Object(N.j)(e)}),{manual:!0,onSuccess:function(e,t){e&&e.code>=0?C((function(e){e.isApplied=!1})):C((function(e){e.isApplied=!0}))}}),H=Object(L.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return Object(N.b)(e)}),{manual:!0,onSuccess:function(e,t){e&&e.code>=0?C((function(e){e.isFavorited=!0})):C((function(e){e.isFavorited=!1}))}}),R=Object(L.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return Object(N.i)(e)}),{manual:!0,onSuccess:function(e,t){e&&e.code>=0?C((function(e){e.isFavorited=!1})):C((function(e){e.isFavorited=!0}))}}),J=Object(L.c)((function(e,t){return function(e,t){return Object(S.b)(w.n,{params:{meetingId:e,fileName:t},responseType:"blob"})}(e,t)}),{manual:!0,onSuccess:function(e,t){e.code<0?o.a.error(e.message):Object(T.a)(e,t[1])}}),Q=Object(L.c)((function(e){return function(e){return Object(S.c)(w.k,{data:e},!0)}(e)}),{manual:!0,onSuccess:function(e,t){console.log(e),e.code>=0?(j(!0),o.a.success("\u4e0a\u4f20\u6210\u529f")):j(!1)}}),Y=Object(L.c)((function(e,t){return function(e,t){return Object(S.a)(w.A,{data:{meetingId:e,fileId:t}})}(e,t)}),{manual:!0,onSuccess:function(e,t){e.data?(j(!0),o.a.success("\u5220\u9664\u6210\u529f")):j(!1)},onError:function(e){j(!1)}}),K=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),x.isApplied?M.run():D.run();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.isFavorited?R.run():H.run();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(n.a,{spinning:V.loading},s.a.createElement("form",{className:B.a.container,onSubmit:K},s.a.createElement("div",{className:B.a.header},s.a.createElement("h2",{className:B.a.title},x.mName),s.a.createElement(p.a,{type:"submit",value:x.isApplied?a.appliedValue:a.unAppliedValue,fontSize:10,loading:x.isApplied?M.loading:D.loading,size:"small"}),x.isFavorited?s.a.createElement(A,{className:B.a.starFiled,onClick:W}):s.a.createElement(z.a,{className:B.a.star,onClick:W})),s.a.createElement(f.a,{type:"text",name:x.typeid===U.a.studentTeams?"\u6bd4\u8d5b\u65f6\u95f4":"\u62a5\u540d\u65f6\u95f4",readOnly:!0,value:x.startTime}),s.a.createElement(f.a,{type:"text",name:"\u5730\u70b9",readOnly:!0,value:x.location}),s.a.createElement(v.a,{name:x.typeid===U.a.studentTeams?"\u6bd4\u8d5b\u7b80\u4ecb":"\u9879\u76ee\u7b80\u4ecb",readOnly:!0,value:x.introduction}),s.a.createElement(f.a,{type:"text",name:x.typeid===U.a.researchTeams?"\u8d1f\u8d23\u8001\u5e08":x.typeid===U.a.studentTeams?"\u961f\u957f":"\u8054\u7cfb\u4eba",readOnly:!0,value:x.organizer}),s.a.createElement(f.a,{type:"text",name:"\u8054\u7cfb\u65b9\u5f0f",readOnly:!0,value:x.communicate}),x.typeid===U.a.studentTeams?s.a.createElement(f.a,{type:"text",name:"\u62db\u52df\u4eba\u6570",readOnly:!0,value:x.needvolunteer}):null,s.a.createElement(v.a,{name:"\u62a5\u540d\u8981\u6c42",readOnly:!0,value:x.schedule}),s.a.createElement(F,{name:"\u4e0a\u4f20\u9644\u4ef6",needUpload:_===t.created,defaultFileList:x.files,loadStatus:!1,meetingId:b,uploadFile:Q.run,deleteFile:Y.run,downloadFile:J.run,refresh:V.refresh})))}}}]);